dependencies:
  pre:
    - sudo pip install awsebcli
deployment:
  elasticbeanstalk:
    branch: /.*/
    commands:
      - eb init $EB_APP --region $AWS_REGION --platform "$EB_PLATFORM" --verbose
      - cat .elasticbeanstalk/config.yml
  production:
    branch: /^(master|release\/|hotfix\/)/
    commands:
      - echo "Deploying to EB environment: $EB_APP-production"
      - eb deploy "$EB_APP-production"
  staging:
    branch: /^(develop|feature\/)/
    commands:
      - echo "Deploying to $EB_APP-staging"
      - eb deploy "$EB_APP-staging"
